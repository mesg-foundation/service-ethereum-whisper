name: "Ethereum Whisper"
description: "Ethereum Whisper Service"
configuration:
  env:
    - ENDPOINT=ws://geth:8546
    - TOPIC=0xffaadd11
    - TTL=10
    - POW_TIME=3
    - POW_TARGET=0.5
dependencies:
  geth:
    image: ethereum/client-go:v1.8.17
    command: "--shh -ws --wsaddr 0.0.0.0 --wsorigins * --syncmode light"
    ports:
      - "30303"
      - "8545"
tasks:
  post:
    inputs:
      payload:
        type: String
      topic:
        type: String
        optional: true
    outputs:
      success:
        data:
          hash:
            type: String
      error:
        data:
          message:
            type: String
events:
  message:
    data:
      ttl:
        type: Number
      timestamp:
        type: Number
      topic:
        type: String
      payload:
        type: String
      padding:
        type: String
      pow:
        type: Number
      hash:
        type: String
